<template>
  <div if:true={loading} class="slds-text-align_center">
    <div class="slds-m-around_xx-large">
      <lightning-spinner></lightning-spinner>
    </div>
  </div>

  <template if:false={loading}>
    <div class="slds-align_absolute-center">
      
      <div class="slds-container--fluid">
        <lightning-input
          class="slds-m-vertical_medium survey-name"
          type="text"
          label={label.survey_name}
          placeholder={label.type_survey_name}
          value={surveyName}
          onchange={handleNameChange}
          required
        >
        </lightning-input>

        <c-image-upload 
          default-url={surveyLogo}
          loading={loading}
          onupdateimageurl={handleImageUpdate}
        ></c-image-upload>

        <lightning-input
          class="slds-m-vertical_medium"
          type="color"
          label={label.survey_bg_color}
          value={surveyBackground}
          onchange={handleColorChange}
        >
        </lightning-input>
        
        <lightning-textarea
          max-length="255"
          label={label.survey_description}
          placeholder={label.type_description}
          value={surveyDescription}
          onchange={handleDescriptionChange}
        >
        </lightning-textarea>

        <lightning-input type="checkbox" label={label.template} checked={isStandardSurvey}
        onchange={handleIsStandardSurveyChange}></lightning-input>

        <template if:true={isHasSurveys}>
            <lightning-input type="checkbox" label={label.connect_to_another_survey} checked={isConnectToSurvey}
                onchange={handleConnectToAnotherSurveyChange}></lightning-input>
            <template if:true={isConnectToSurvey}>
                <template if:false={isError}>
                    <lightning-combobox name="surveys" label={label.surveys} value={surveyId}
                        placeholder={label.select_survey_for_connect} options={surveyOptions} onchange={handleSurveyChange}
                        required></lightning-combobox>
                </template>
                <template if:true={isError}>
                    <div class="text">{label.error_loading_surveys}</div>
                </template>
            </template>
        </template>
      </div>

    </div>

    <hr class="slds-m-bottom_small" />
    
    <div class="slds-text-align_right slds-m-bottom_small">
      <lightning-button
        variant="brand"
        label={label.next}
        onclick={clickNextButton}
        class="slds-m-left_x-small"
      ></lightning-button>
    </div>
  </template>
</template>